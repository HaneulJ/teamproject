{% extends 'base.html' %}

{% block content %}

 <!-- 게시판 시작-->
    <div class="site-section">
      <div class="container">

              <h2 style="text-align: center">CONTENT</h2>
              <div class="row">
                  <div class="col-lg-12">
                      <div class="section-title mb-5">
                          <h2>{{Boardview.title}}</h2>
                      </div>
                  </div>
              </div>

              <div class="col-lg-12">
                  <p>{{Boardview.content}}</p>
              </div>
              <hr>

               {% if Boardview.author.username == request.user.username%}
               <div class="col-lg-12">
                   <button id="remove" onclick="Boarddel({{Boardview.id}})"   class="btn btn-secondary">삭제</button>
               </div>
              {% endif %}


        <br>
        <div class="col-lg-12">
            <a href="{% url 'Board' %}"> << 게시판으로 </a>
        </div>




!-- 댓글 목록 -->
<h3>댓글 목록 ({{ Boardview.comment_set.all|length }})</h3>
<!-- +length, .count 갯수 구하기-->
<ul>
    {% for comment in Boardview.comment_set.all %}
    <li>
        {{ comment.content }} - {{ comment.created_at }}
        <a href="{% url 'Boardview:comments_edit' post.pk comment.pk %}">Edit</a>
        <form action="{% url 'Boardview:comments_delete' post.pk comment.pk %}" method = "POST">
            {% csrf_token %}
            <input type="submit" value="Delete!">
        </form>
    </li>
    {% empty %}
    <li>
        작성된 댓글이 없습니다 :(
    </li>
    {% endfor %}
</ul>

<!-- 댓글 입력창 -->
<h3>댓글 입력</h3>
<form action="{% url 'Boardview:comments_new' Boardview.pk%}" method="POST">
    {% csrf_token %}
    {{ comment_form }}
    <input type ="submit">
</form>


</div>
</div>
</div>

    <!-- 끝-->
    <script>

        function Boarddel(id){
             location.href="{% url 'Boarddel'%}?id="+id;
        }

    </script>


{% endblock %}